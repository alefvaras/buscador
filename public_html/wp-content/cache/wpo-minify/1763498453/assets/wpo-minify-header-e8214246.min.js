
jQuery(document).ready((function(e){"use strict";let i,a,t;e(document).on("click",".reviews-images-item",(function(){let s=e(this);if(s.closest(".kt-reviews-image-container").hasClass("kt-reviews-image-container-image-popup-below_thumb")){let s,r;t=e(this).parent().parent(),s=parseInt(t.find(".wcpr-rotate-value").val());let n=t.find(".big-review-images");if(e(this).hasClass("active-image"))n.hide(),e(this).removeClass("active-image");else{i=e(this).data("index"),a=e(this).parent().find(".reviews-images-item").length,e(this).parent().find(".reviews-images-item").removeClass("active-image"),e(this).addClass("active-image");let s="";s=e(this).find(".reviews-iframe").length?'<iframe class="reviews-images reviews-iframe" src="'+e(this).data("image_src")+'" frameborder="0" style="float:left;display: block;border-radius: 3px;" allowfullscreen></iframe>':e(this).find(".review-videos").length?'<video class="reviews-images reviews-videos" width="100%" src="'+e(this).data("image_src")+'" controls></video>':'<img class="big-review-images-content-img" style="float:left;display: block;border-radius: 3px;" src="'+e(this).data("image_src")+'">',t.find(".big-review-images-content").html(s),n.css({display:"table"}),t.find(".wcpr-review-image-caption").html(e(this).data("image_caption"))}s&&(r=t.find(".big-review-images-content-container"),r.css({transform:"rotate("+s+"deg)"}))}else{let i=s.find(".review-images").closest(".kt-wc-reviews-images-wrap-wrap"),a=[];i.find(".reviews-images-item").map((function(){let t=e(this).find(".review-images"),s=e(this).data("image_src")?e(this).data("image_src"):t.attr("src"),r=e(this).data("image_caption")?e(this).data("image_caption"):parseInt(e(this).data("index"))+1+"/"+i.find(".reviews-images-item").length;a.push({href:s,title:r})})),e.swipebox(a,{hideBarsDelay:1e5,initialIndexOnArray:s.data("index")})}})),e(document).on("click",".big-review-images-content-img",(function(){let i=e(this).closest(".kt-reviews-image-container").find(".kt-wc-reviews-images-wrap-wrap"),a=[];i.find(".reviews-images-item").map((function(){let t=e(this).find(".review-images"),s=e(this).data("image_src")?e(this).data("image_src"):t.attr("src"),r=e(this).data("image_caption")?e(this).data("image_caption"):parseInt(e(this).data("index"))+1+"/"+i.find(".reviews-images-item").length;a.push({href:s,title:r})})),e.swipebox(a,{hideBarsDelay:1e5,initialIndexOnArray:i.find(".active-image").data("index")})})),e(document).on("click",".wcpr-next-normal",(function(){let s,r;t=e(this).parent().parent(),s=parseInt(t.find(".wcpr-rotate-value").val()),i=t.find(".active-image").data("index"),a=t.find(".reviews-images-item").length,t.find(".reviews-images-item").removeClass("active-image"),i<a-1?i++:i=0,t.find(".reviews-images-item").eq(i).addClass("active-image"),t.find(".big-review-images-content").html("");let n=t.find(".big-review-images"),m="";m=t.find(".active-image .reviews-iframe").length?'<iframe class="reviews-images reviews-iframe" src="'+t.find(".reviews-images-item").eq(i).data("image_src")+'" frameborder="0" style="float:left;display: block;border-radius: 3px;" allowfullscreen></iframe>':t.find(".active-image .review-videos").length?'<video class="reviews-images reviews-videos" width="100%" src="'+t.find(".reviews-images-item").eq(i).data("image_src")+'" controls></video>':'<img class="big-review-images-content-img" style="float:left;display: block;border-radius: 3px;" src="'+t.find(".reviews-images-item").eq(i).data("image_src")+'">',n.find(".big-review-images-content").append(m),n.css({display:"table"}),t.find(".wcpr-review-image-caption").html(t.find(".reviews-images-item").eq(i).data("image_caption")),s&&(r=t.find(".big-review-images-content-container"),r.css({transform:"rotate("+s+"deg)"}))})),e(document).on("click",".wcpr-prev-normal",(function(){let s,r;t=e(this).parent().parent(),s=parseInt(t.find(".wcpr-rotate-value").val()),i=t.find(".active-image").data("index"),a=t.find(".reviews-images-item").length,t.find(".reviews-images-item").removeClass("active-image"),i>0?i--:i=a-1,t.find(".reviews-images-item").eq(i).addClass("active-image"),t.find(".big-review-images-content").html("");let n=t.find(".big-review-images"),m="";m=t.find(".active-image .reviews-iframe").length?'<iframe class="reviews-images reviews-iframe" src="'+t.find(".reviews-images-item").eq(i).data("image_src")+'" frameborder="0" style="float:left;display: block;border-radius: 3px;" allowfullscreen></iframe>':t.find(".active-image .review-videos").length?'<video class="reviews-images reviews-videos" width="100%" src="'+t.find(".reviews-images-item").eq(i).data("image_src")+'" controls></video>':'<img class="big-review-images-content-img" style="float:left;display: block;border-radius: 3px;" src="'+t.find(".reviews-images-item").eq(i).data("image_src")+'">',n.find(".big-review-images-content").append(m),n.css({display:"table"}),t.find(".wcpr-review-image-caption").html(t.find(".reviews-images-item").eq(i).data("image_caption")),s&&(r=t.find(".big-review-images-content-container"),r.css({transform:"rotate("+s+"deg)"}))})),e(document).on("click",".wcpr-close-normal",(function(){t=e(this).parent().parent(),e(this).parent().hide(),t.find(".kt-wc-reviews-images-wrap-wrap").find(".active-image").removeClass("active-image")})),e(document).on("click",".wcpr-rotate-left",(function(){let i,a;t=e(this).parent().parent(),i=parseInt(t.find(".wcpr-rotate-value").val()),a=t.find(".big-review-images-content-container"),i+=-90,t.find(".wcpr-rotate-value").val(i),a.css({transform:"rotate("+i+"deg)"})})),e(document).on("click",".wcpr-rotate-right",(function(){let i,a;t=e(this).parent().parent(),i=parseInt(t.find(".wcpr-rotate-value").val()),a=t.find(".big-review-images-content-container"),i+=90,t.find(".wcpr-rotate-value").val(i),a.css({transform:"rotate("+i+"deg)"})}));let s=woocommerce_photo_reviews_params.hasOwnProperty("comments_container_id")?woocommerce_photo_reviews_params.comments_container_id:"comments",r=e(".wcpr-filter-container");e("#"+s).prepend(r).prepend(e(".wcpr-overall-rating-and-rating-count")).prepend(e(".woocommerce-Reviews-title").eq(0))}));



jQuery(window).on("elementor/frontend/init",()=>{"use strict";elementorFrontend.hooks.addAction("frontend/element_ready/woocommerce-photo-reviews.default",function($scope){if(!window.elementor){return}wcpr_helpful_button();viwcpr_flexslider()})});jQuery(document).ready(function($){"use strict";let image_caption_enable=woocommerce_photo_reviews_params.image_caption_enable==1;let i18n_image_caption=woocommerce_photo_reviews_params.i18n_image_caption;function getSelectedImageHtml(src,name,error="",index){let selectImageHtml;let temp=`<img title="${name}" src="${src}" class="wcpr-selected-image-preview">`;if(src.indexOf("data:video/")>-1){temp=`<video class="wcpr-selected-image-preview" height="100%" width="100%" src="${src}" controls >${name}</video>`}if(error){selectImageHtml=`<div class="wcpr-selected-image">${temp}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name wcpr-comment-form-error" >${error}</div></div></div>`}else if(image_caption_enable){selectImageHtml=`<div class="wcpr-selected-image">${temp}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name" title="${name}">${name}</div><input class="wcpr-selected-image-caption" type="text" name="wcpr_image_caption[${index}]" placeholder="${i18n_image_caption}"></div></div>`}else{selectImageHtml=`<div class="wcpr-selected-image">${temp}<div class="wcpr-selected-image-info"><div class="wcpr-selected-image-name" title="${name}">${name}</div></div></div>`}return selectImageHtml}function readURL(input){let max_file_size=1024*parseFloat(woocommerce_photo_reviews_params.max_file_size);for(let i=0;i<input.files.length;i++){var reader=new FileReader;const dt=new DataTransfer;const file=input.files[i];dt.items.add(file);reader.onload=function(e){let error="";if(input.files[i].size>max_file_size){error=woocommerce_photo_reviews_params.warning_max_file_size.replace("%file_name%",input.files[i].name)}else if(woocommerce_photo_reviews_params.upload_allow.indexOf(input.files[i].type)===-1){error=woocommerce_photo_reviews_params.warning_upload_allow.replace("%file_name%",input.files[i].name)}if(woocommerce_photo_reviews_params.image_caption_enable==1){const fileInput=$("<input>").attr("type","file").attr("class","wcpr-hidden").attr("name",`wcpr_image_upload[${i}]`)[0];fileInput.files=dt.files;$(input).parent().find(".wcpr-selected-image-container").append(getSelectedImageHtml(e.target.result,input.files[i].name,error,i)).append(fileInput)}else{$(input).parent().find(".wcpr-selected-image-container").append(getSelectedImageHtml(e.target.result,input.files[i].name,error,i))}};reader.readAsDataURL(input.files[i])}}wcpr_helpful_button();viwcpr_flexslider();let max_files=woocommerce_photo_reviews_params.max_files;$("#commentform").on("change",".wcpr_image_upload",function(e){$(this).parent().find(".wcpr-selected-image-container").html("");if(this.files.length>max_files){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_max_files);$(this).val("");return false}else if(this.files.length>0){jQuery(".wcpr-comment-form-error-wraps").addClass("wcpr-hidden");readURL(this)}});jQuery(document).on("click",".wcpr_image_upload_button",function(e){e.preventDefault();e.stopPropagation();jQuery(this).parent().find(".wcpr_image_upload").trigger("click")});$("#commentform").find('input[type="submit"]').on("click",function(e){let $button=$(this);if($button.hasClass("viwcpr_form_checked")||!$("#wcpr_image_upload_nonce").length){return true}let $container=$button.closest("form");let $content=$container.find('textarea[id="comment"]')||$container.find('textarea[name="comment"]');let $name=$container.find('input[name="author"]');let $email=$container.find('input[name="email"]');jQuery(".wcpr-comment-form-error-wraps").addClass("wcpr-hidden");jQuery(".wcpr-comment-form-notify-wraps").addClass("wcpr-hidden");let $rating=$container.find("#rating"),rating=$rating.val();if($rating.length>0&&!rating&&woocommerce_photo_reviews_params.review_rating_required==="yes"){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_rating_text);e.preventDefault();return false}if($content.length>0){let comment=$content.val();if(!comment&&woocommerce_photo_reviews_params.allow_empty_comment!=1){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_comment_text);e.preventDefault();$content.focus();return false}let minimum_comment_length=parseInt(woocommerce_photo_reviews_params.minimum_comment_length);if(minimum_comment_length&&minimum_comment_length>comment.length){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_minimum_comment_text);e.preventDefault();$content.focus();return false}}if($name.length>0&&$name.attr("required")&&!$name.val()){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_name_text);e.preventDefault();$name.focus();return false}if($email.length>0&&$email.attr("required")&&!$email.val()){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.i18n_required_email_text);e.preventDefault();$email.focus();return false}if($container.find('input[name="wcpr_gdpr_checkbox"]').prop("checked")===false){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_gdpr);e.preventDefault();return false}if("on"===woocommerce_photo_reviews_params.enable_photo){if(!$container.attr("enctype")||$container.attr("enctype")!=="multipart/form-data"){$container.attr("enctype","multipart/form-data")}let $fileUpload=$container.find(".wcpr_image_upload");if($fileUpload.length>0){let file_upload=$fileUpload.get(0).files;let imagesCount=parseInt(file_upload.length);if("on"===woocommerce_photo_reviews_params.required_image&&imagesCount===0){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_required_image);e.preventDefault();return false}if(imagesCount>max_files){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_max_files);e.preventDefault();return false}let error=[],max_file_size=1024*parseFloat(woocommerce_photo_reviews_params.max_file_size);jQuery.each(file_upload,function(k,v){if(v.size>max_file_size){error.push("<p>"+woocommerce_photo_reviews_params.warning_max_file_size.replace("%file_name%",v.name)+"</p>");return true}if(woocommerce_photo_reviews_params.upload_allow.indexOf(v.type)===-1){error.push("<p>"+woocommerce_photo_reviews_params.warning_upload_allow.replace("%file_name%",v.name)+"</p>")}});if(error.length){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(error.join(""));e.preventDefault();return false}}else if("on"===woocommerce_photo_reviews_params.required_image){jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(woocommerce_photo_reviews_params.warning_required_image);e.preventDefault();return false}}jQuery(".wcpr-comment-form-notify-wraps").removeClass("wcpr-hidden");if(woocommerce_photo_reviews_params.restrict_number_of_reviews){$button.attr("type","button");let restrict_number_of_reviews=async function(){let error="",data=new FormData($container[0]);if($content.val()&&!$container.find('textarea[name="comment"]').val()){data.set("comment",$content.val())}await new Promise(function(resolve){$.ajax({type:"post",url:woocommerce_photo_reviews_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcpr_restrict_number_of_reviews"),processData:false,cache:false,contentType:false,data:data,success:function(response){if(response.error){error=response.error}else{if(response.remove_upload_file){$container.find(".wcpr_image_upload").val("")}if(response.img_id){$container.append(`<input type="hidden" name="wcpr_image_upload_id" value="${response.img_id}">`)}}resolve(error)},error:function(err){error=err.responseText==="-1"?err.statusText:err.responseText;resolve(error)}})});return error};restrict_number_of_reviews().then(function(error){$button.attr("type","submit");if(error){jQuery(".wcpr-comment-form-notify-wraps").addClass("wcpr-hidden");jQuery(".wcpr-comment-form-error-wraps").removeClass("wcpr-hidden").html(error);e.preventDefault();return false}else{$button.addClass("viwcpr_form_checked").trigger("click")}})}});let comments=woocommerce_photo_reviews_params.hasOwnProperty("comments_container_id")?woocommerce_photo_reviews_params.comments_container_id:"comments";let $comments=$("#"+comments);if($comments.length>0){append_filters_and_overall_rating();handle_ajax_pagination_and_loadmore()}else{$(document).on("skeleton-loaded",function(){$comments=$("#"+comments);append_filters_and_overall_rating();handle_ajax_pagination_and_loadmore()})}$(document).on("click",".reviews_tab",function(){$comments=$("#"+comments);append_filters_and_overall_rating()});function handle_ajax_pagination_and_loadmore(){if(woocommerce_photo_reviews_params.pagination_ajax&&$comments.length){let $pagination_container=$comments.find(".woocommerce-pagination");if(woocommerce_photo_reviews_params.loadmore_button){$pagination_container.html(jQuery(".wcpr-load-more-reviews-button-modal").html());wcpr_pagination_loadmore($comments,$comments.find(".woocommerce-pagination"))}else{wcpr_pagination_basic($comments,$comments.find(".woocommerce-pagination"))}}else if(jQuery(".et_divi_theme").length){jQuery("a.wcpr-filter-button").on("click",function(){location.href=jQuery(this).attr("href")})}}function append_filters_and_overall_rating(){$comments.prepend($(".wcpr-filter-container")).prepend($(".wcpr-overall-rating-and-rating-count")).prepend($(".woocommerce-Reviews-title").eq(0))}function wcpr_pagination_basic($comments,$pagination_container){$comments=jQuery($comments);$pagination_container=jQuery($pagination_container);let ajax_pagination_running=false;jQuery(document).on("click",".woocommerce-pagination a",function(e){if(ajax_pagination_running){return false}e.preventDefault();e.stopPropagation();let $container=woocommerce_photo_reviews_params.display==="1"?$comments.find(".wcpr-grid"):$comments.find(woocommerce_photo_reviews_params.container);let scrollTop=parseInt($container.offset().top)-200;window.scrollTo({top:scrollTop,behavior:"smooth"});ajax_pagination_running=true;let url=jQuery(this).attr("href");if(!$container.find(".wcpr-grid-overlay").length){$container.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>')}let $overlay=$container.find(".wcpr-grid-overlay");$overlay.removeClass("wcpr-hidden");jQuery.ajax({url:url,type:"get",success:function(response){if(response){let $reg;let temp_html=jQuery(response);if(woocommerce_photo_reviews_params.display==="1"){$container.html(temp_html.find(".wcpr-grid").html())}else{$container.html(temp_html.find(woocommerce_photo_reviews_params.container).html())}if(temp_html.find(".woocommerce-pagination").length){$pagination_container.html(temp_html.find(".woocommerce-pagination").html())}jQuery(document.body).trigger("wcpr_ajax_pagination_end")}$overlay.addClass("wcpr-hidden");ajax_pagination_running=false},error:function(err){ajax_pagination_running=false;$overlay.addClass("wcpr-hidden")}})});let $filters=$comments.find(".wcpr-filter-container");if(!$filters.length){return false}if(jQuery(".et_divi_theme").length){jQuery("a.wcpr-filter-button").on("click",function(e){e.preventDefault();e.stopPropagation();let $button=jQuery(this);if(ajax_pagination_running||parseInt($button.find(".wcpr-filter-button-count").html())===0&&!$button.hasClass("wcpr-active")){return false}ajax_pagination_running=true;e.preventDefault();let url=jQuery(this).attr("href");let $container=woocommerce_photo_reviews_params.display==="1"?$comments.find(".wcpr-grid"):$comments.find(woocommerce_photo_reviews_params.container);if($container.length===0){if(woocommerce_photo_reviews_params.display==="1"){$comments.append('<div class="'+woocommerce_photo_reviews_params.grid_class+'"><div class="wcpr-grid-overlay"></div></div>');$container=$comments.find(".wcpr-grid")}else{let first_char=woocommerce_photo_reviews_params.container.substr(0,1);if(first_char==="."){$comments.append('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>')}else{$comments.append('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>')}$container=$comments.find(woocommerce_photo_reviews_params.container)}$comments.find(".woocommerce-noreviews").hide()}if(!$container.find(".wcpr-grid-overlay").length){$container.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>')}let $overlay=$container.find(".wcpr-grid-overlay");$overlay.removeClass("wcpr-hidden");$filters.addClass("wcpr-filter-loading");jQuery.ajax({url:url,type:"get",data:{wcpr_is_ajax:1},success:function(response){if(response){response=response.replace(/(\r\n\t|\n|\r\t)/gm,"");let $reg,match;let temp_html=jQuery(response);if(woocommerce_photo_reviews_params.display==="1"){$container.html(temp_html.find(".wcpr-grid").html())}else{$container.html(temp_html.find(woocommerce_photo_reviews_params.container).html())}if(temp_html.find(".woocommerce-pagination").length){if($pagination_container&&$pagination_container.length){$pagination_container.html(temp_html.find(".woocommerce-pagination").html())}else{$comments.append('<nav class="woocommerce-pagination">'+temp_html.find(".woocommerce-pagination").html()+"</nav>");$pagination_container=$comments.find(".woocommerce-pagination")}}else{if($pagination_container&&$pagination_container.length>0){$pagination_container.remove();$pagination_container=null}}if(typeof woocommerce_photo_reviews_params.wrap_filters!=="undefined"){const className=woocommerce_photo_reviews_params.wrap_filters.trim();const classRegexSafe=className.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/\s+/g,"\\s+");$reg=new RegExp(`<div class="${classRegexSafe}"\\s*style="display:\\s*none;">([^]+?)<\\/div>`,"gm")}else{$reg=/<div class="wcpr-filter-container" style="display: none;">([^]+?)<\/div>/gm}match=$reg.exec(response);if(match!=null){$filters.html(match[1])}jQuery(document.body).trigger("wcpr_ajax_pagination_end")}},error:function(err){console.log(err)},complete:function(){ajax_pagination_running=false;$overlay.addClass("wcpr-hidden");$filters.removeClass("wcpr-filter-loading")}})})}else{jQuery(document).on("click","a.wcpr-filter-button",function(e){e.preventDefault();e.stopPropagation();let $button=jQuery(this);if(ajax_pagination_running||parseInt($button.find(".wcpr-filter-button-count").html())===0&&!$button.hasClass("wcpr-active")){return false}ajax_pagination_running=true;e.preventDefault();let url=jQuery(this).attr("href");let $container=woocommerce_photo_reviews_params.display==="1"?$comments.find(".wcpr-grid"):$comments.find(woocommerce_photo_reviews_params.container);if($container.length===0){if(woocommerce_photo_reviews_params.display==="1"){$comments.append('<div class="'+woocommerce_photo_reviews_params.grid_class+'"><div class="wcpr-grid-overlay"></div></div>');$container=$comments.find(".wcpr-grid")}else{let first_char=woocommerce_photo_reviews_params.container.substr(0,1);if(first_char==="."){$comments.append('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>')}else{$comments.append('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>')}$container=$comments.find(woocommerce_photo_reviews_params.container)}$comments.find(".woocommerce-noreviews").hide()}if(!$container.find(".wcpr-grid-overlay").length){$container.append('<div class="wcpr-grid-overlay wcpr-hidden"></div>')}let $overlay=$container.find(".wcpr-grid-overlay");$overlay.removeClass("wcpr-hidden");$filters.addClass("wcpr-filter-loading");jQuery.ajax({url:url,type:"get",data:{wcpr_is_ajax:1},success:function(response){if(response){response=response.replace(/(\r\n\t|\n|\r\t)/gm,"");let $reg,match;let temp_html=jQuery(response);if(woocommerce_photo_reviews_params.display==="1"){$container.html(temp_html.find(".wcpr-grid").html())}else{$container.html(temp_html.find(woocommerce_photo_reviews_params.container).html())}if(temp_html.find(".woocommerce-pagination").length){if($pagination_container&&$pagination_container.length){$pagination_container.html(temp_html.find(".woocommerce-pagination").html())}else{$comments.append('<nav class="woocommerce-pagination">'+temp_html.find(".woocommerce-pagination").html()+"</nav>");$pagination_container=$comments.find(".woocommerce-pagination")}}else{if($pagination_container&&$pagination_container.length>0){$pagination_container.remove();$pagination_container=null}}if(typeof woocommerce_photo_reviews_params.wrap_filters!=="undefined"){const className=woocommerce_photo_reviews_params.wrap_filters.trim();const classRegexSafe=className.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/\s+/g,"\\s+");$reg=new RegExp(`<div class="${classRegexSafe}"\\s*style="display:\\s*none;">([^]+?)<\\/div>`,"gm")}else{$reg=/<div class="wcpr-filter-container" style="display: none;">([^]+?)<\/div>/gm}match=$reg.exec(response);if(match!=null){$filters.html(match[1])}jQuery(document.body).trigger("wcpr_ajax_pagination_end")}},error:function(err){console.log(err)},complete:function(){ajax_pagination_running=false;$overlay.addClass("wcpr-hidden");$filters.removeClass("wcpr-filter-loading")}})})}}function wcpr_pagination_loadmore($comments,$pagination_container){$comments=jQuery($comments);$pagination_container=jQuery($pagination_container);let $filters=$comments.find(".wcpr-filter-container"),cpage=jQuery(".wcpr-load-more-reviews-cpage").val(),max_page=jQuery(".wcpr-load-more-reviews-cpage").data("max_page"),parent_post_id=jQuery(".wcpr-load-more-reviews-product-id").val(),rating=jQuery(".wcpr-load-more-reviews-rating").val(),verified=jQuery(".wcpr-load-more-reviews-verified").val(),image=jQuery(".wcpr-load-more-reviews-image").val(),$no_review=$comments.find(".woocommerce-noreviews"),$container=woocommerce_photo_reviews_params.display==="1"?$comments.find(".wcpr-grid"):$comments.find(woocommerce_photo_reviews_params.container);function handle_missing_container(){if($container.length===0){let first_char=woocommerce_photo_reviews_params.display==="1"?".":woocommerce_photo_reviews_params.container.substr(0,1);if(first_char==="."){$container=woocommerce_photo_reviews_params.display==="1"?jQuery('<div class="'+woocommerce_photo_reviews_params.grid_class+'"></div>'):jQuery('<ol class="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>')}else{$container=jQuery('<ol id="'+woocommerce_photo_reviews_params.container.substr(1)+'"></ol>')}$comments.append($container)}}function handle_missing_pagination(){if($pagination_container.length===0){$comments.append('<nav class="woocommerce-pagination"></nav>');$pagination_container=$comments.find(".woocommerce-pagination")}}if(cpage&&parent_post_id){jQuery(document).on("click",".wcpr-load-more-reviews-button:not(.shortcode-wcpr-load-more-reviews-button):not(.wcpr-loading)",function(){let $button=jQuery(this);if($button.parent().hasClass("wcpr-hidden")){return false}if(cpage>-1){jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_ajax_load_more_reviews",nonce:woocommerce_photo_reviews_params.nonce,post_id:parent_post_id,cpage:cpage,rating:rating,verified:verified,image:image,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},type:"POST",beforeSend:function(xhr){$button.addClass("wcpr-loading")},success:function(response){if(response.html){if(woocommerce_photo_reviews_params.display=="2"){$container.append(response.html)}else{let $html=jQuery(response.html);let review_html=$html.find('div[id^="comment-"]');$container.append(review_html)}if(woocommerce_photo_reviews_params.default_comments_page==="oldest"){if(cpage<max_page){cpage++}else{$button.parent().addClass("wcpr-hidden")}}else{if(cpage>1){cpage--}else{$button.parent().addClass("wcpr-hidden")}}}else{$button.parent().addClass("wcpr-hidden")}jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},complete:function(){$button.removeClass("wcpr-loading")}})}return false});let ajax_pagination_running=false;if($filters.length){let $filters_rating=$filters.find(".wcpr-filter-button-ul");jQuery(document).on("click","a.wcpr-filter-button",function(e){let $button=jQuery(this);let load_more_button=$button.closest("#comments").find(".wcpr-load-more-reviews-button:not(.shortcode-wcpr-load-more-reviews-button):not(.wcpr-loading)");if(ajax_pagination_running||parseInt($button.find(".wcpr-filter-button-count").html())===0&&!$button.hasClass("wcpr-active")){return false}if(woocommerce_photo_reviews_params.default_comments_page==="oldest"){cpage=1}else{cpage=""}let filter_type=$button.data("filter_type");switch(filter_type){case"all":if($button.hasClass("wcpr-active")){return false}else{rating=""}break;case"image":if($button.hasClass("wcpr-active")){image=""}else{image=1}break;case"verified":if($button.hasClass("wcpr-active")){verified=""}else{verified=1}break;default:if($button.hasClass("wcpr-active")){return false}else{rating=parseInt(filter_type)}}ajax_pagination_running=true;e.preventDefault();$filters.addClass("wcpr-filter-loading");jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,type:"POST",data:{action:"wcpr_ajax_load_more_reviews",post_id:parent_post_id,cpage:cpage,rating:rating,verified:verified,image:image,filter_type:filter_type,is_shortcode:"",frontend_style:woocommerce_photo_reviews_params.display},success:function(response){if(response.html){$no_review.hide();handle_missing_container()}if(woocommerce_photo_reviews_params.display=="2"){$container.html(response.html)}else{let $html=jQuery(response.html);let review_html=$html.find('div[id^="comment-"]');$container.html(review_html)}handle_missing_pagination();max_page=parseInt(response.max_page);if(!load_more_button.length){handle_ajax_pagination_and_loadmore()}$pagination_container.find(".wcpr-load-more-reviews-button").parent().removeClass("wcpr-hidden");if(woocommerce_photo_reviews_params.default_comments_page==="oldest"){if(cpage<max_page){cpage++}else{load_more_button.parent().addClass("wcpr-hidden")}}else{if(cpage>1){cpage--}else{load_more_button.parent().addClass("wcpr-hidden")}}let update_count=response.update_count;if(update_count){for(let i in update_count){if(update_count.hasOwnProperty(i)){$filters.find('.wcpr-filter-button[data-filter_type="'+i+'"]').find(".wcpr-filter-button-count").html(update_count[i])}}}$filters.find(".wcpr-filter-rating-placeholder .wcpr-filter-button-count").html(update_count.all);switch(filter_type){case"all":$filters_rating.find(".wcpr-filter-button").removeClass("wcpr-active");$button.addClass("wcpr-active");$filters.find(".wcpr-filter-rating-placeholder").html($button.html());break;case"image":case"verified":if($button.hasClass("wcpr-active")){$button.removeClass("wcpr-active")}else{$button.addClass("wcpr-active")}break;default:$filters_rating.find(".wcpr-filter-button").removeClass("wcpr-active");$button.addClass("wcpr-active");$filters.find(".wcpr-filter-rating-placeholder").html($button.html())}jQuery(document.body).trigger("wcpr_ajax_load_more_reviews_end")},error:function(err){console.log(err)},complete:function(){ajax_pagination_running=false;$filters.removeClass("wcpr-filter-loading")}})})}}}function viwcpr_flexslider(){"use strict";if(!jQuery(".woocommerce-photo-reviews-shortcode, .wcpr-review-title").length){setTimeout(function(){viwcpr_flexslider()},100);return false}jQuery(".woocommerce-photo-reviews-shortcode:not(.woocommerce-photo-reviews-slide)").each(function(){jQuery(this).addClass("woocommerce-photo-reviews-slide");if(!jQuery(this).data("wcpr_slide")){jQuery(this).addClass("woocommerce-photo-reviews-slide-none");return true}let rtl=false,now=Date.now(),params=jQuery(this).data("reviews_shortcode"),selector=".shortcode-wcpr-grid .shortcode-wcpr-grid-item";if(jQuery(this).find(".shortcode-wcpr-reviews").length){selector=".commentlist li"}if(!jQuery(this).find(".viwcpr-slide-wrap").length){jQuery(this).append('<div class="viwcpr-slide-wrap viwcpr-slide-wrap-'+now+'" data-id_css="viwcpr-slide-wrap-'+now+'"></div>');let tmp=jQuery(selector).parent().clone();jQuery(selector).parent().remove();jQuery(this).find(".viwcpr-slide-wrap").css({width:"100%",position:"relative"}).append(tmp)}if(jQuery(this).closest(".rtl").length){rtl=true}let wrap=jQuery(this).find(".viwcpr-slide-wrap");let wrap_width=wrap.innerWidth()?jQuery(this).parent().width():0,gap=parseInt(params.cols_gap||20),colums=parseInt(params.cols||4),colums_mobile=parseInt(params.cols_mobile||1);if(wrap_width<600&&wrap_width>=480){colums=colums>3?3:colums}if(wrap_width<480){colums=colums_mobile}jQuery(this).addClass("woocommerce-photo-reviews-slide-init");let itemWidth=wrap_width?(wrap_width-gap*colums)/colums:200;wrap.addClass("viwcpr-slide-wrap-init").removeData("flexslider").viwcaio_flexslider({namespace:"villatheme-slider-",selector:selector,animation:"slide",animationLoop:1,itemWidth:itemWidth,itemMargin:gap,controlNav:false,maxItems:colums,reverse:false,rtl:rtl,move:colums,touch:true,slideshow:false,start:function(slider){if(slider.count===slider.move){get_reviews(slider,1,params,selector).then(function(){slider.setProps(0)})}let id_css=slider.data("id_css"),css=`.${id_css} .viwse-suggestion-product-wrap{width: ${itemWidth}px !important;}`,h=0;for(let i=0;i<slider.move;i++){if(h<slider.find(selector).eq(i).innerHeight()){h=slider.find(selector).eq(i).innerHeight()}if(slider.find(selector).eq(i).find(".shortcode-reviews-images-wrap-right img").length){slider.find(selector).eq(i).find(".shortcode-reviews-images-wrap-right img").on("load",function(){if(!jQuery("#"+id_css).length){jQuery("head").append(`<style id="${id_css}"></style>`)}if(jQuery(this).closest(selector+":visible").length&&jQuery(this).closest(selector).innerHeight()&&slider.data("current_height")){let h_tmp=slider.find(selector).eq(i).innerHeight()+30;if(jQuery(this).closest(selector).innerHeight()>parseFloat(slider.data("current_height"))){let css_tmp=`.${id_css} .viwse-suggestion-product-wrap{width: ${itemWidth}px !important;}`;css_tmp+=`.${id_css} .villatheme-slider-viewport{height: ${h_tmp}px !important;}`;jQuery("#"+id_css).html(css_tmp);slider.data("current_height",h_tmp)}}})}}if(h){h+=30;css+=`.${id_css} .villatheme-slider-viewport{height: ${h}px !important;}`}if(!jQuery("#"+id_css).length){jQuery("head").append(`<style id="${id_css}"></style>`)}jQuery("#"+id_css).html(css);slider.data("current_height",h)},before:function(slider){slider.removeClass("viwcpr-slide-wrap-init")},after:function(slider){if(slider.hasClass("viwcpr-slide-wrap-init")){return true}slider.addClass("viwcpr-slide-wrap-init");let id_css=slider.data("id_css"),css=`.${id_css} .viwse-suggestion-product-wrap{width: ${itemWidth}px !important;}`,first=slider.currentSlide*slider.move,last=(slider.currentSlide+1)*slider.move,h=0;slider.find(selector).css({"margin-bottom":"0","margin-top":"0",width:`${itemWidth}px !important;`});if(first===last){h=slider.find(selector).eq(first).innerHeight();if(slider.find(selector).eq(first).find(".shortcode-reviews-images-wrap-right img").length){slider.find(selector).eq(first).find(".shortcode-reviews-images-wrap-right img").on("load",function(){if(!jQuery("#"+id_css).length){jQuery("head").append(`<style id="${id_css}"></style>`)}if(jQuery(this).closest(selector+":visible").length&&jQuery(this).closest(selector).innerHeight()&&slider.data("current_height")){let h_tmp=slider.find(selector).eq(i).innerHeight()+30;if(jQuery(this).closest(selector).innerHeight()>parseFloat(slider.data("current_height"))){let css_tmp=`.${id_css} .viwse-suggestion-product-wrap{width: ${itemWidth}px !important;}`;css_tmp+=`.${id_css} .villatheme-slider-viewport{height: ${h_tmp}px !important;}`;jQuery("#"+id_css).html(css_tmp);slider.data("current_height",h_tmp)}}})}}else{for(let i=first;i<last;i++){if(h<slider.find(selector).eq(i).innerHeight()){h=slider.find(selector).eq(i).innerHeight()}if(slider.find(selector).eq(i).find(".shortcode-reviews-images-wrap-right img").length){slider.find(selector).eq(i).find(".shortcode-reviews-images-wrap-right img").on("load",function(){if(!jQuery("#"+id_css).length){jQuery("head").append(`<style id="${id_css}"></style>`)}if(jQuery(this).closest(selector+":visible").length&&jQuery(this).closest(selector).innerHeight()&&slider.data("current_height")){let h_tmp=slider.find(selector).eq(i).innerHeight()+30;if(jQuery(this).closest(selector).innerHeight()>parseFloat(slider.data("current_height"))){let css_tmp=`.${id_css} .viwse-suggestion-product-wrap{width: ${itemWidth}px !important;}`;css_tmp+=`.${id_css} .villatheme-slider-viewport{height: ${h_tmp}px !important;}`;jQuery("#"+id_css).html(css_tmp);slider.data("current_height",h_tmp)}}})}}}if(h){h+=30;css+=`.${id_css} .villatheme-slider-viewport{height: ${h}px !important;}`;slider.data("current_height",h)}if(!jQuery("#"+id_css).length){jQuery("head").append(`<style id="${id_css}"></style>`)}jQuery("#"+id_css).html(css)},end:function(slider){let total_pages=parseInt(slider.find(".wcpr-reviews-total-pages").html()||slider.closest(".woocommerce-photo-reviews-shortcode").find(".wcpr-reviews-total-pages").html()),current_page=Math.ceil(slider.find(selector).length/parseInt(params.comments_per_page||1));if(total_pages>current_page){let current=slider.limit;get_reviews(slider,current_page,params,selector).then(function(){slider.setProps(current)})}}})});let get_reviews=async function(slider,current_page,params,selector){await new Promise(function(resolve){jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,type:"get",data:{action:"woocommerce_photo_reviews_shortcode_ajax_get_reviews",nonce:woocommerce_photo_reviews_params.nonce,reviews_shortcode:JSON.stringify(params),wcpr_page:current_page+1,wcpr_image:slider.data("wcpr_image"),wcpr_verified:slider.data("wcpr_verified"),wcpr_rating:slider.data("wcpr_rating")},beforeSend:function(){slider.closest(".woocommerce-photo-reviews-shortcode").addClass("woocommerce-photo-reviews-shortcode-loading")},success:function(response){let temp=jQuery("<div></div>");temp.append(response.html);temp.find(selector).each(function(k,v){slider.addSlide(jQuery(v))});slider.closest(".woocommerce-photo-reviews-shortcode").removeClass("woocommerce-photo-reviews-shortcode-loading");resolve(slider)},error:function(err){resolve(slider);slider.closest(".woocommerce-photo-reviews-shortcode").removeClass("woocommerce-photo-reviews-shortcode-loading")}})})};jQuery(".wcpr-grid .wcpr-grid-item").last().css("display","inline-block");jQuery(".shortcode-wcpr-grid .shortcode-wcpr-grid-item").last().css("display","inline-block");if(jQuery("#wcpr_thank_you_message").length){setTimeout(function(){jQuery(".reviews_tab a").trigger("click");setTimeout(function(){window.scrollTo({top:jQuery("#review_form").offset().top-450})})},100)}}function wcpr_helpful_button(){"use strict";let popup_button=[".wcpr-single-product-summary .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)",".shortcode-wcpr-single-product-summary .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)"];jQuery(document).on("click",popup_button.join(","),function(e){if(!woocommerce_photo_reviews_params.ajax_atc){return true}e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();let button=jQuery(this),form=jQuery(this).closest("form.cart");button.addClass("vi-wcaio-product-bt-atc-loading");if(!form.length||button.hasClass("disabled")){button.removeClass("vi-wcaio-product-bt-atc-loading");return false}if(form.hasClass(".variations_form")){let variation_id_check=parseInt(form.find("input[name=variation_id]").val());if(!variation_id_check||variation_id_check<=0){button.removeClass("vi-wcaio-product-bt-atc-loading");return false}}let product_id=form.find("input[name=product_id]").val();if(!product_id){product_id=form.find("[name=add-to-cart]").val()}if(!product_id||form.find('[name="woopb-add-to-cart"]').length){button.attr("type","submit").trigger("click");return false}let data={};form.find("select, textarea, input").each(function(){if(jQuery(this).prop("disabled")){return true}if(["checkbox","radio"].indexOf(jQuery(this).attr("type"))>-1&&!jQuery(this).prop("checked")){return true}let name=jQuery(this).attr("name");if(name){data[name]=jQuery(this).val()}});if(!data["add-to-cart"]){data["add-to-cart"]=form.find("[name=add-to-cart]").val()}jQuery(document.body).trigger("adding_to_cart",[button,data]);if(!woocommerce_photo_reviews_params["ajax_atc_event"]){woocommerce_photo_reviews_params["ajax_atc_event"]=[]}woocommerce_photo_reviews_params["ajax_atc_event"].push({type:"post",url:woocommerce_photo_reviews_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcpr_add_to_cart"),data:data,beforeSend:function(){button.removeClass("added").addClass("loading")},success:function(response){if(response.error){location.href=window.location.href;return false}if(woocommerce_photo_reviews_params.cart_redirect_after_add==="yes"&&woocommerce_photo_reviews_params.cart_url){window.location=woocommerce_photo_reviews_params.cart_url;return false}jQuery(document.body).trigger("added_to_cart",[response.fragments,response.cart_hash,button]);if(!woocommerce_photo_reviews_params.woocommerce_enable_ajax_add_to_cart){jQuery(document.body).trigger("wc_fragment_refresh")}jQuery(document.body).trigger("viwcpr_added_to_cart",[response.fragments,response.cart_hash,button]);woocommerce_photo_reviews_params["ajax_atc_event"].shift();if(woocommerce_photo_reviews_params["ajax_atc_event"].length>0){jQuery.ajax(woocommerce_photo_reviews_params["ajax_atc_event"][0])}},complete:function(response){button.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added")}});if(woocommerce_photo_reviews_params["ajax_atc_event"].length===1){jQuery.ajax(woocommerce_photo_reviews_params["ajax_atc_event"][0])}});jQuery(document).on("click",".wcpr-comment-helpful-button",function(e){e.stopPropagation();let button=jQuery(this);let vote=button.hasClass("wcpr-comment-helpful-button-up-vote")?"up":"down";let container=button.closest(".wcpr-comment-helpful-button-container");let comment_id=container.data("comment_id");if(vote==="up"&&container.hasClass("wcpr-comment-helpful-button-voted-up")){return}if(vote==="down"&&container.hasClass("wcpr-comment-helpful-button-voted-down")){return}if(container.hasClass("wcpr-comment-helpful-button-voting")){return}container.addClass("wcpr-comment-helpful-button-voting");jQuery.ajax({url:woocommerce_photo_reviews_params.ajaxurl,data:{action:"wcpr_helpful_button_handle",vote:vote,comment_id:comment_id,nonce:woocommerce_photo_reviews_params.nonce},type:"POST",success:function(response){if(response.status==="success"){container.find(".wcpr-comment-helpful-button-up-vote-count").html(parseInt(response.up));container.find(".wcpr-comment-helpful-button-down-vote-count").html(parseInt(response.down));if(vote==="up"){container.removeClass("wcpr-comment-helpful-button-voted-down").addClass("wcpr-comment-helpful-button-voted-up")}else{container.removeClass("wcpr-comment-helpful-button-voted-up").addClass("wcpr-comment-helpful-button-voted-down")}if(container.parent().hasClass("reviews-content-right-meta")||container.parent().hasClass("shortcode-reviews-content-right-meta")){let comment_container=jQuery('.wcpr-comment-helpful-button-container[data-comment_id="'+comment_id+'"]');comment_container.find(".wcpr-comment-helpful-button-up-vote-count").html(parseInt(response.up));comment_container.find(".wcpr-comment-helpful-button-down-vote-count").html(parseInt(response.down));if(vote==="up"){comment_container.removeClass("wcpr-comment-helpful-button-voted-down").addClass("wcpr-comment-helpful-button-voted-up")}else{comment_container.removeClass("wcpr-comment-helpful-button-voted-up").addClass("wcpr-comment-helpful-button-voted-down")}}}},error:function(){},complete:function(){container.removeClass("wcpr-comment-helpful-button-voting")}})})}function viSwipeDetect(el,callback){var touchsurface=el,swipedir,startX,startY,distX,distY,threshold=150,restraint=100,allowedTime=300,elapsedTime,startTime,handleswipe=callback||function(swipedir){};touchsurface.addEventListener("touchstart",function(e){var touchobj=e.changedTouches[0];swipedir="none";startX=touchobj.pageX;startY=touchobj.pageY;startTime=(new Date).getTime()},false);touchsurface.addEventListener("touchmove",function(e){e.preventDefault()},false);touchsurface.addEventListener("touchend",function(e){var touchobj=e.changedTouches[0];distX=touchobj.pageX-startX;distY=touchobj.pageY-startY;elapsedTime=(new Date).getTime()-startTime;if(elapsedTime<=allowedTime){if(Math.abs(distX)>=threshold&&Math.abs(distY)<=restraint){swipedir=distX<0?"left":"right"}else if(Math.abs(distY)>=threshold&&Math.abs(distX)<=restraint){swipedir=distY<0?"up":"down"}}handleswipe(swipedir)},false)}});



let slides,current_shortcode_id;function shortcode_wcpr_resize_masonry_items(e=!1){jQuery(".shortcode-wcpr-grid-item.wcpr-grid-item-init").removeClass("wcpr-grid-item-init");let o,r=20;jQuery(".wcpr-grid-loadmore .shortcode-wcpr-grid-item:not(.wcpr-grid-item-init)").each((function(){if(!jQuery(this).is(":visible"))return!0;o=jQuery(this).closest(".woocommerce-photo-reviews-shortcode").data("reviews_shortcode"),r=o?parseInt(o.cols_gap||r):r,shortcode_wcpr_resize_masonry_item(jQuery(this),1,r)}))}function shortcode_wcpr_resize_masonry_item(e,o,r){let t,i=0;if((e=jQuery(e)).find(".shortcode-reviews-images-wrap-right .shortcode-reviews-images").length&&(t=e.find(".shortcode-reviews-images-wrap-right .shortcode-reviews-images"),i=t.outerHeight(),0===i)){let o=e.find(".shortcode-wcpr-content").outerWidth(),r=t.attr("width")||0,s=t.attr("height")||0;i=0!==s?Math.round(o/r*s):o}let s=e.find(".shortcode-wcpr-content").outerHeight(),a=e.find(".shortcode-review-content-container").outerHeight();s<a+i&&(s=a+i);let c=Math.ceil((s+r)/(o+r));e.addClass("wcpr-grid-item-init").css("grid-row-end","span "+c)}function wcpr_enable_scroll(){"use strict";let e=parseInt(jQuery("html").css("top"));jQuery("html").removeClass("shortcode-wcpr-noscroll"),window.scrollTo({top:-e,behavior:"instant"})}function wcpr_disable_scroll(){"use strict";if(jQuery(document).height()>jQuery(window).height()){let e=jQuery("html").scrollTop()?jQuery("html").scrollTop():jQuery("body").scrollTop();jQuery("html").addClass("shortcode-wcpr-noscroll").css("top",-e)}}jQuery(window).on("elementor/frontend/init",(()=>{"use strict";elementorFrontend.hooks.addAction("frontend/element_ready/woocommerce-photo-reviews.default",(function(e){if(!window.elementor)return;let o=e.find(".woocommerce-photo-reviews-shortcode"),r=-1,t=0,i=!1;function s(e){t=0,r=e,e>=slides.length&&(r=0),e<0&&(r=slides.length-1),jQuery("#shortcode-reviews-content-left-modal").html(""),jQuery("#shortcode-reviews-content-left-main").html("");let o=jQuery(slides[r]);if(0==o.find(".shortcode-reviews-images-container").length)jQuery(".shortcode-wcpr-modal-light-box").addClass("shortcode-wcpr-no-images");else{jQuery("#shortcode-reviews-content-left-modal").html(o.find(".shortcode-reviews-images-wrap-left").html());let e=o.find(".shortcode-reviews-images-wr-right").html();e&&(jQuery(".shortcode-wcpr-modal-light-box").removeClass("shortcode-wcpr-no-images"),jQuery("#shortcode-reviews-content-left-main").html(e)),jQuery("#shortcode-reviews-content-left-modal").find(".shortcode-reviews-images").parent().on("click",(function(){t=jQuery(this).data("image_index");let e="",o=jQuery(this).attr("href"),r=jQuery("#shortcode-reviews-content-left-main").find(".shortcode-reviews-images");return jQuery(this).hasClass("reviews-iframe")||jQuery(this).find(".reviews-iframe").length?e=jQuery(`<iframe class="shortcode-reviews-images reviews-iframe" data-original_src="${o}" src="${o}" frameborder="0" allowfullscreen></iframe>`):jQuery(this).hasClass("reviews-videos")||jQuery(this).find(".reviews-videos").length?e=jQuery(`<video class="shortcode-reviews-images reviews-videos" data-original_src="${o}" src="${o}" controls></video>`):(e=jQuery(`<img class="shortcode-reviews-images" data-original_src="${o}" src="${o}">`),e.attr("title",r.attr("title"))),e.attr({width:r.attr("width"),height:r.attr("width")}),r.replaceWith(e),jQuery("#shortcode-reviews-content-left-main").find(".shortcode-wcpr-review-image-caption").html(jQuery(this).data("image_caption")),!1}))}jQuery("#shortcode-reviews-content-right .shortcode-reviews-content-right-meta").html(o.find(".shortcode-review-content-container").html()),jQuery("#shortcode-reviews-content-right .shortcode-wcpr-single-product-summary").html(o.find(".shortcode-wcpr-single-product-summary-content-wrapper").html()),jQuery(".shortcode-wcpr-modal-light-box").fadeIn(200),jQuery("img.jetpack-lazy-image:not(.jetpack-lazy-image--handled)").length&&document.querySelector("body").dispatchEvent(new Event("jetpack-lazy-images-load"))}(/iPad/i.test(navigator.userAgent)||/Safari/i.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&!/Mobi|Android/i.test(navigator.userAgent))&&(i=!0),o.find(".shortcode-wcpr-grid-item .shortcode-reviews-images").unbind().on("click",(function(e){let r=jQuery(this),t=o.data("reviews_shortcode");if(t.hasOwnProperty("masonry_popup")&&"image"===t.masonry_popup){e.stopPropagation();let o=r.closest(".shortcode-reviews-images-container"),t=[];o.find(".shortcode-reviews-images-wrap-left").find("a").map((function(){let e=jQuery(this).find(".shortcode-reviews-images"),r=jQuery(this).data("image_src")?jQuery(this).data("image_src"):e.attr("src"),i=jQuery(this).data("image_caption")?jQuery(this).data("image_caption"):parseInt(jQuery(this).data("image_index"))+1+"/"+o.find(".shortcode-reviews-images-wrap-left").find("a").length;t.push({href:r,title:i})})),0===t.length&&t.push({href:r.data("original_src")?r.data("original_src"):r.attr("src"),title:r.parent().find(".shortcode-wcpr-review-image-caption").html()}),jQuery.swipebox(t,{hideBarsDelay:1e5,initialIndexOnArray:0})}})),i||o.find(".shortcode-wcpr-enable-box-shadow").addClass("shortcode-wcpr-fix-box-shadow"),jQuery(".shortcode-wcpr-modal-light-box").keydown((function(e){jQuery.swipebox.isOpen||"none"!=jQuery(".shortcode-wcpr-modal-light-box").css("display")&&(27==e.keyCode&&(jQuery(".shortcode-wcpr-modal-light-box").fadeOut(200),jQuery(".shortcode-wcpr-modal-light-box").removeClass(current_shortcode_id+"-modal"),r=-1),-1!=r&&(37==e.keyCode&&s(r-=1),39==e.keyCode&&s(r+=1)))})),o.find(".shortcode-wcpr-grid-item").unbind().on("click",(function(){let e=o.data("reviews_shortcode");if(e.hasOwnProperty("masonry_popup")&&"review"===e.masonry_popup){e.hasOwnProperty("full_screen_mobile")&&"on"===e.full_screen_mobile?jQuery(".shortcode-wcpr-modal-light-box").addClass("shortcode-wcpr-full-screen-mobile"):jQuery(".shortcode-wcpr-modal-light-box").removeClass("shortcode-wcpr-full-screen-mobile"),slides=o.find(".shortcode-wcpr-grid-item");let r=slides.index(jQuery(this));r>=0&&(jQuery(".shortcode-wcpr-modal-light-box").removeClass(current_shortcode_id+"-modal"),current_shortcode_id=o.attr("id"),jQuery(".shortcode-wcpr-modal-light-box").addClass(current_shortcode_id+"-modal"),s(r),wcpr_disable_scroll())}})),o.find(".shortcode-wcpr-read-more").unbind().on("click",(function(e){e.stopPropagation();let o=jQuery(this).closest(".shortcode-wcpr-review-content"),r=o.find(".shortcode-wcpr-review-content-full").html();r&&o.html(r),o.closest(".shortcode-wcpr-grid-item").removeClass("wcpr-grid-item-init"),shortcode_wcpr_resize_masonry_items(!0)})),shortcode_wcpr_resize_masonry_items(!0)}))})),jQuery(document).ready((function(e){"use strict";let o=!1;function r(){o||e(".shortcode-wcpr-enable-box-shadow").addClass("shortcode-wcpr-fix-box-shadow"),shortcode_wcpr_resize_masonry_items()}(/iPad/i.test(navigator.userAgent)||/Safari/i.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&!/Mobi|Android/i.test(navigator.userAgent))&&(o=!0),r();let t=-1,i=0;function s(){wcpr_enable_scroll(),e(".shortcode-wcpr-modal-light-box").fadeOut(200),t=-1}function a(o){i=0,t=o,o>=slides.length&&(t=0),o<0&&(t=slides.length-1);let r=e("#shortcode-reviews-content-left-modal"),s=e("#shortcode-reviews-content-left-main");r.html(""),s.html("");let a=e(slides[t]);if(0===a.find(".shortcode-reviews-images-container").length)e(".shortcode-wcpr-modal-light-box").addClass("shortcode-wcpr-no-images");else{r.html(a.find(".shortcode-reviews-images-wrap-left").html());let o=a.find(".shortcode-reviews-images-wrap-right").html();if(o){e(".shortcode-wcpr-modal-light-box").removeClass("shortcode-wcpr-no-images"),s.html(o);let r=s.find("img").data("original_src");!r||r.indexOf("data:")>-1?s.find("img").attr("src",s.find("img").attr("src")):s.find("img").attr("src",r)}r.find(".shortcode-reviews-images").map((function(){let o=e(this).data("src");o&&e(this).attr("src",o)})),r.find(".shortcode-reviews-images").parent().on("click",(function(){i=e(this).data("image_index");let o="",r=jQuery(this).attr("href");return jQuery(this).hasClass("reviews-iframe")||jQuery(this).find(".reviews-iframe").length?o=jQuery(`<iframe class="shortcode-reviews-images reviews-iframe" data-original_src="${r}" src="${r}" frameborder="0" allowfullscreen></iframe>`):jQuery(this).hasClass("reviews-videos")||jQuery(this).find(".reviews-videos").length?o=jQuery(`<video class="shortcode-reviews-images reviews-videos" data-original_src="${r}" src="${r}" controls></video>`):(r=e(this).data("image_src")||r,o=jQuery(`<img class="shortcode-reviews-images" data-original_src="${r}" src="${r}">`),o.attr("title",s.find(".shortcode-reviews-images").attr("title"))),o.attr({width:s.find(".shortcode-reviews-images").attr("width"),height:s.find(".shortcode-reviews-images").attr("width")}),s.find(".shortcode-reviews-images").replaceWith(o),s.find(".shortcode-wcpr-review-image-caption").html(e(this).data("image_caption")),!1}))}e("#shortcode-reviews-content-right .shortcode-reviews-content-right-meta").html(a.find(".shortcode-review-content-container").html()),e("#shortcode-reviews-content-right .shortcode-wcpr-single-product-summary").html(a.find(".shortcode-wcpr-single-product-summary-content-wrapper").html()),e(".shortcode-wcpr-modal-light-box").fadeIn(200),function(o){e(".shortcode-wcpr-single-product-summary").find(".shortcode-wcpr-variations_form").each((function(){e(this).addClass("variations_form vi_wpvs_variation_form"),e(this).find("select").each((function(r,t){e(this).val(jQuery(o).find("select").eq(r).val()).trigger("change")})),e(this).wc_variation_form(),e(document.body).trigger("vi_wpvs_variation_form"),e(document.body).trigger("wc_price_based_country_ajax_geolocation")}))}(a),jQuery("img.jetpack-lazy-image:not(.jetpack-lazy-image--handled)").length&&document.querySelector("body").dispatchEvent(new Event("jetpack-lazy-images-load")),jQuery("img.jetpack-lazy-image").next("img").remove()}e(".shortcode-wcpr-close").on("click",(function(){s()})),e(".shortcode-wcpr-single-product-summary-meta-shop .variations_form").each((function(){e(this).addClass("shortcode-wcpr-variations_form").removeClass("variations_form")})),e(".shortcode-wcpr-modal-light-box .shortcode-wcpr-overlay").on("click",(function(){s()})),e("#shortcode-reviews-content-left-main").on("click",".shortcode-reviews-images",(function(){let o=e(this),r=[];e("#shortcode-reviews-content-left-modal").find("a").map((function(){let o=e(this).find(".shortcode-reviews-images"),t=e(this).data("image_src")?e(this).data("image_src"):o.attr("src"),i=e(this).data("image_caption")?e(this).data("image_caption"):parseInt(e(this).data("image_index"))+1+"/"+e("#shortcode-reviews-content-left-modal").find("a").length;r.push({href:t,title:i})})),0===r.length&&r.push({href:o.data("original_src")?o.data("original_src"):o.attr("src"),title:o.parent().find(".shortcode-wcpr-review-image-caption").html()}),e.swipebox(r,{hideBarsDelay:1e5,initialIndexOnArray:i})})),e(document).on("keydown",(function(o){let r=e(".shortcode-wcpr-modal-light-box");0!==e(".woocommerce-photo-reviews-shortcode").length&&(e.swipebox.isOpen||"none"!==r.css("display")&&(27===o.keyCode&&s(),-1!==t&&(37===o.keyCode&&a(t-=1),39===o.keyCode&&a(t+=1))))})),e(document).on("click",".shortcode-wcpr-grid-item",(function(){let o=e(this).closest(".woocommerce-photo-reviews-shortcode"),r=o.data("reviews_shortcode");if(r.hasOwnProperty("masonry_popup")&&"review"===r.masonry_popup){r.hasOwnProperty("full_screen_mobile")&&"on"===r.full_screen_mobile?e(".shortcode-wcpr-modal-light-box").addClass("shortcode-wcpr-full-screen-mobile"):e(".shortcode-wcpr-modal-light-box").removeClass("shortcode-wcpr-full-screen-mobile"),slides=o.find(".shortcode-wcpr-grid-item");let t=slides.index(e(this));t>=0&&(e(".shortcode-wcpr-modal-light-box").removeClass(current_shortcode_id+"-modal"),current_shortcode_id=o.attr("id"),e(".shortcode-wcpr-modal-light-box").addClass(current_shortcode_id+"-modal"),a(t),wcpr_disable_scroll())}})),e(document).on("click",".shortcode-wcpr-read-more",(function(o){o.stopPropagation();let r=e(this).closest(".shortcode-wcpr-review-content"),t=r.find(".shortcode-wcpr-review-content-full").html();t&&r.html(t),r.closest(".shortcode-wcpr-grid-item").removeClass("wcpr-grid-item-init"),shortcode_wcpr_resize_masonry_items(!0)})),e(document).on("click",".shortcode-wcpr-grid-item .shortcode-reviews-images",(function(o){let r=e(this),t=r.closest(".woocommerce-photo-reviews-shortcode").data("reviews_shortcode");if(t.hasOwnProperty("masonry_popup")&&"image"===t.masonry_popup){o.stopPropagation();let t=r.closest(".shortcode-reviews-images-container"),i=[];t.find(".shortcode-reviews-images-wrap-left").find("a").map((function(){let o=e(this).find(".shortcode-reviews-images"),r=e(this).data("image_src")?e(this).data("image_src"):o.attr("src"),s=e(this).data("image_caption")?e(this).data("image_caption"):parseInt(e(this).data("image_index"))+1+"/"+t.find(".shortcode-reviews-images-wrap-left").find("a").length;i.push({href:r,title:s})})),0===i.length&&i.push({href:r.data("original_src")?r.data("original_src"):r.attr("src"),title:r.parent().find(".shortcode-wcpr-review-image-caption").html()}),e.swipebox(i,{hideBarsDelay:1e5,initialIndexOnArray:0})}})),jQuery("img.jetpack-lazy-image").next("img").remove(),e("body").on("click",".shortcode-wcpr-next",(function(){a(t+=1)})),e("body").on("click",".shortcode-wcpr-prev",(function(){a(t-=1)}));let c=!1,n="",d="",h="";e(document).on("click",".shortcode-wcpr-load-more-reviews-button:not(.wcpr-loading)",(function(o){let t=e(this),i=t.closest(".woocommerce-photo-reviews-shortcode");n=i.data("wcpr_image"),d=i.data("wcpr_verified"),h=i.data("wcpr_rating");let s=i.data("reviews_shortcode");if(c)return!1;c=!0,o.preventDefault(),i.addClass("woocommerce-photo-reviews-shortcode-loading"),t.addClass("wcpr-loading"),e.ajax({url:woocommerce_photo_reviews_shortcode_params.ajaxurl,type:"get",data:{action:"woocommerce_photo_reviews_shortcode_ajax_get_reviews",nonce:woocommerce_photo_reviews_shortcode_params.nonce,reviews_shortcode:JSON.stringify(s),wcpr_page:t.data("cpage"),wcpr_image:n,wcpr_verified:d,wcpr_rating:h},success:function(e){let o=jQuery('<div class="woocommerce_photo_reviews_shortcode_ajax_get_reviews"></div>');o.css("display","none").html(e.html),s.hasOwnProperty("style")&&"masonry"===s.style?i.find(".shortcode-wcpr-grid").append(o.find(".shortcode-wcpr-grid").html()):i.find(".commentlist").append(o.find(".commentlist").html()),i.find(".wcpr-load-more-reviews-button-container").replaceWith(o.find(".wcpr-load-more-reviews-button-container")),i.data("wcpr_image",n),i.data("wcpr_verified",d),i.data("wcpr_rating",h)},complete:function(){s.hasOwnProperty("style")&&"masonry"===s.style&&s.hasOwnProperty("masonry_popup")&&s.masonry_popup,r(),jQuery(document.body).trigger("woocommerce_photo_reviews_shortcode_ajax_get_reviews"),c=!1,t.removeClass("wcpr-loading"),i.removeClass("woocommerce-photo-reviews-shortcode-loading")}})})),e(document).on("click","a.wcpr-page-numbers.wcpr-page-numbers-nav",(function(e){let o=jQuery(this).closest(".woocommerce-photo-reviews-shortcode").data("reviews_shortcode");if(!o.hasOwnProperty("pagination_ajax")||"on"!==o.pagination_ajax)return!0;e.preventDefault(),e.stopPropagation();let r=jQuery(this).closest(".shortcode-wcpr-pagination"),t=r.find(".wcpr-page-numbers").index(r.find(".wcpr-page-numbers.wcpr-current"));if(jQuery(this).hasClass("wcpr-page-numbers-next")?t++:t--,0===t||t===r.find(".wcpr-page-numbers:not(.wcpr-page-numbers-nav)").length)return!1;r.find(".wcpr-page-numbers").eq(t).trigger("click")})),e(document).on("click","a.wcpr-page-numbers:not(.wcpr-page-numbers-nav)",(function(o){let t=e(this),i=t.closest(".woocommerce-photo-reviews-shortcode");n=i.data("wcpr_image"),d=i.data("wcpr_verified"),h=i.data("wcpr_rating");let s=i.data("reviews_shortcode");if(!s.hasOwnProperty("pagination_ajax")||"on"!==s.pagination_ajax)return!0;if(c)return!1;let a=parseInt(i.offset().top);window.scrollTo({top:a,behavior:"smooth"}),c=!0,o.preventDefault(),i.addClass("woocommerce-photo-reviews-shortcode-loading"),e.ajax({url:woocommerce_photo_reviews_shortcode_params.ajaxurl,type:"get",data:{action:"woocommerce_photo_reviews_shortcode_ajax_get_reviews",nonce:woocommerce_photo_reviews_shortcode_params.nonce,reviews_shortcode:JSON.stringify(s),wcpr_page:parseInt(t.html()),wcpr_image:n,wcpr_verified:d,wcpr_rating:h},success:function(e){i.html(e.html),i.data("wcpr_image",n),i.data("wcpr_verified",d),i.data("wcpr_rating",h)},error:function(e){},complete:function(){s.hasOwnProperty("style")&&"masonry"===s.style&&s.hasOwnProperty("masonry_popup")&&s.masonry_popup,r(),jQuery(document.body).trigger("woocommerce_photo_reviews_shortcode_ajax_get_reviews"),c=!1,i.removeClass("woocommerce-photo-reviews-shortcode-loading")}})})),e(document).on("click","a.shortcode-wcpr-filter-button",(function(o){let t=e(this),i=t.closest(".woocommerce-photo-reviews-shortcode"),s=i.data("reviews_shortcode");if(!s.hasOwnProperty("pagination_ajax")||"on"!==s.pagination_ajax)return;if(c||0===parseInt(t.find(".shortcode-wcpr-filter-button-count").html())&&!t.hasClass("shortcode-wcpr-active"))return!1;n=i.data("wcpr_image"),d=i.data("wcpr_verified"),h=i.data("wcpr_rating");let a=t.data("filter_type");switch(a){case"all":if(t.hasClass("shortcode-wcpr-active"))return!1;h="";break;case"image":n=t.hasClass("shortcode-wcpr-active")?"":1;break;case"verified":d=t.hasClass("shortcode-wcpr-active")?"":1;break;default:if(t.hasClass("shortcode-wcpr-active"))return!1;h=a}let l=parseInt(i.offset().top);window.scrollTo({top:l,behavior:"smooth"}),c=!0,o.preventDefault(),i.addClass("woocommerce-photo-reviews-shortcode-loading"),e.ajax({url:woocommerce_photo_reviews_shortcode_params.ajaxurl,type:"get",data:{action:"woocommerce_photo_reviews_shortcode_ajax_get_reviews",nonce:woocommerce_photo_reviews_shortcode_params.nonce,reviews_shortcode:JSON.stringify(s),wcpr_image:n,wcpr_verified:d,wcpr_rating:h},success:function(e){i.html(e.html),i.data("wcpr_image",n),i.data("wcpr_verified",d),i.data("wcpr_rating",h)},error:function(e){},complete:function(){s.hasOwnProperty("style")&&"masonry"===s.style&&s.hasOwnProperty("masonry_popup")&&s.masonry_popup,r(),i.hasClass("woocommerce-photo-reviews-slide-init")&&(i.removeClass("woocommerce-photo-reviews-slide woocommerce-photo-reviews-slide-init woocommerce-photo-reviews-slide-none"),viwcpr_flexslider()),jQuery(document.body).trigger("woocommerce_photo_reviews_shortcode_ajax_get_reviews"),c=!1,i.removeClass("woocommerce-photo-reviews-shortcode-loading")}})})),e(document).on("scroll",(function(e){setTimeout((function(){shortcode_wcpr_resize_masonry_items()}),100)})),e(document).on("click","a",(function(e){setTimeout((function(){shortcode_wcpr_resize_masonry_items()}),100)}))})),jQuery(window).on("resize",(function(){"use strict";shortcode_wcpr_resize_masonry_items(!0)}));



/*! This file is auto-generated */
window.wp=window.wp||{},function(s){var t="undefined"==typeof _wpUtilSettings?{}:_wpUtilSettings;wp.template=_.memoize(function(e){var n,a={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(t){if(document.getElementById("tmpl-"+e))return(n=n||_.template(s("#tmpl-"+e).html(),a))(t);throw new Error("Template not found: #tmpl-"+e)}}),wp.ajax={settings:t.ajax||{},post:function(t,e){return wp.ajax.send({data:_.isObject(t)?t:_.extend(e||{},{action:t})})},send:function(a,t){var e,n;return _.isObject(a)?t=a:(t=t||{}).data=_.extend(t.data||{},{action:a}),t=_.defaults(t||{},{type:"POST",url:wp.ajax.settings.url,context:this}),(e=(n=s.Deferred(function(n){t.success&&n.done(t.success),t.error&&n.fail(t.error),delete t.success,delete t.error,n.jqXHR=s.ajax(t).done(function(t){var e;"1"!==t&&1!==t||(t={success:!0}),_.isObject(t)&&!_.isUndefined(t.success)?(e=this,n.done(function(){a&&a.data&&"query-attachments"===a.data.action&&n.jqXHR.hasOwnProperty("getResponseHeader")&&n.jqXHR.getResponseHeader("X-WP-Total")?e.totalAttachments=parseInt(n.jqXHR.getResponseHeader("X-WP-Total"),10):e.totalAttachments=0}),n[t.success?"resolveWith":"rejectWith"](this,[t.data])):n.rejectWith(this,[t])}).fail(function(){n.rejectWith(this,arguments)})})).promise()).abort=function(){return n.jqXHR.abort(),this},e}}}(jQuery);


