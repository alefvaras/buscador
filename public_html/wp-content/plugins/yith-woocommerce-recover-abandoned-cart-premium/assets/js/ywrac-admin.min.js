!function(r){"use strict";r("#ywrac-mailslog-content #doaction.button").on("click",function(){window.onbeforeunload=""}),r("#ywrac_user_guest_enabled-privacy").on("change",function(){r(this).is(":checked")?r("tr.yith-plugin-fw-panel-wc-row.textarea").show():r("tr.yith-plugin-fw-panel-wc-row.textarea").hide()}),r("#ywrac_user_guest_enabled-ever").on("change",function(){r(this).is(":checked")&&r("tr.yith-plugin-fw-panel-wc-row.textarea").hide()}),r("#ywrac_user_guest_enabled-never").on("change",function(){r(this).is(":checked")&&r("tr.yith-plugin-fw-panel-wc-row.textarea").hide()}),r("#ywrac_user_guest_enabled-privacy").change();var e=r(".ywrac_send_email"),n=(r(document).on("click",".yith-plugin-fw__action-button--sendmail-action .yith-plugin-fw__action-button__menu__item",function(e){e.stopPropagation(),e.preventDefault();var t=r(this),e=t.data("id"),a=t.data("cart_id"),i=t.data("type"),n="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader;t.append('<img src="'+n+'" >'),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_email_send",cart_id:a,email_template:e,type:i,security:yith_ywrac_admin.send_email_nonce},function(e){"no"!=e.email_sent&&(e=yith_ywrac_admin.sent_label+' <i>"'+e.email_name+'"</i><br>'+yith_ywrac_admin.sent_label_on+" "+e.email_sent,(0<t.parents(".yith-ywrac-info-cart").length?t.parents(".yith-ywrac-info-cart").find(".ywrac_email_status"):r('.email_status[data-id="'+a+'"]')).html(e),t.find("img").remove())})}),e.on("click",function(e){e.stopPropagation(),e.preventDefault();var t=r(this),e=t.prev("select"),a="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader,i=t.data("type"),n=t.data("id");0==e.length&&(e=r("#ywrac-email-template")),t.append('<img src="'+a+'" >'),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_email_send",cart_id:n,email_template:e.val(),type:i,security:yith_ywrac_admin.send_email_nonce},function(e){"no"!=e.email_sent&&(e=yith_ywrac_admin.sent_label+" "+e.email_name+" ("+e.email_sent+")",(0<t.parents(".yith-ywrac-info-cart").length?t.parents(".yith-ywrac-info-cart").find(".ywrac_email_status"):r('.email_status[data-id="'+n+'"]')).html(e),t.find("img").remove())})}),r(".ywrac-button-sent-email"));n.on("click",function(e){e.preventDefault(),e.stopPropagation();var t=r(this),e=t.data("id"),a="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader,i=r("#_ywrac_email_to_send").val();t.after(' <img src="'+a+'" >'),r(".email-sent-label").remove(),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_email_test_send",email_to_sent:i,email_template:e,security:yith_ywrac_admin.send_email_nonce},function(e){1==e.email_sent&&(t.next().remove(),n.after(' <span class="email-sent-label">'+yith_ywrac_admin.sent_label_test+"</span>"))})});r(".ywrac-reset-reports").on("click",function(e){e.stopPropagation();var e="undefined"!=typeof yith_ywrac_admin&&yith_ywrac_admin.block_loader,t=r("#ywrac_reset_reports_nonce").val();!0===window.confirm(yith_ywrac_admin.reset_confirmation)&&(r(this).after(' <img src="'+e+'" >'),r.post(yith_ywrac_admin.ajaxurl,{action:"ywrac_reset_reports",nonce:t},function(e){!0===e.reset&&(r(this).next().remove(),location.reload())}))}),r(document).on("change",".ywrac-toggle-enabled input",function(){var e="yes"===r(this).val()?"yes":"no",t=r(this).closest(".ywrac-toggle-enabled"),a=t.data("email-template-id"),t=t.data("security");r.ajax({type:"POST",data:{action:"email_template_toggle_enabled",id:a,enabled:e,security:t},url:yith_ywrac_admin.ajaxurl,success:function(e){"undefined"!=typeof e.error&&alert(e.error),window.onbeforeunload=function(){return null}}})}),r("#yith_woocommerce_recover_abandoned_cart_email").find(".yith-add-button").detach().insertAfter("#yith_woocommerce_recover_abandoned_cart_email .yith-plugin-fw__panel__content__page__title"),r("#_ywrac_template_title").keyup(function(){r(".yith-plugin-ui--ywrac_email-post_type #post-body-content #title").val(r(this).val()),r("#_ywrac_template_title").css("border","none")}),r(".yith-plugin-ui--ywrac_email-post_type #ywrac-post-type__save").on("click",e=>{e.preventDefault(),""===r("#_ywrac_template_title").val()?(r("#_ywrac_template_title").css("border","1px solid red"),r("html, body").animate({scrollTop:r("#_ywrac_template_title").offset().top-40},1e3)):((e=r(".yith-plugin-ui--ywrac_email-post_type form#post")).append('<input type="hidden" name="post_status" value="publish" />'),e.submit())})}(jQuery);